import{u as j,A as I,k as S,c as l,a as _,o as c,b as o,d as e,g as d,t as v,x as u,F as E,G as y,e as m,s as k,p as D,h as A}from"./vendor.603ec2c7.js";import{_ as B,P as F,t as p,l as w,A as a}from"./index.1c564fd6.js";import{t as f}from"./TicketsService.9340f218.js";const N={setup(){const s=j(),r=I();return S(async()=>{try{s.name=="EventDetails"&&(await p.getEventById(s.params.id),await f.getEventTickets(s.params.id),await p.getEventComments(s.params.id))}catch(n){w.error(n)}}),{people:l(()=>a.peopleTickets),activeEvent:l(()=>a.activeEvent),comments:l(()=>a.comments),account:l(()=>a.account),hasTicket:l(()=>a.peopleTickets.find(n=>n.id==a.account.id)),async cancelEvent(){try{await F.confirm()&&(await p.cancelEvent(s.params.id),r.push({name:"Home"}))}catch(n){w.error(n)}},addTicket(){try{let n={accountId:a.account.id,eventId:a.activeEvent.id};f.addTicket(n)}catch(n){w.error(n)}},account:l(()=>a.account),comment:l(()=>a.comments)}}},h=s=>(D("data-v-4985f30c"),s=s(),A(),s),P={class:"container-fluid"},V={class:"row m-3 mb-0 justify-content-center lightcolor text-shadow"},L={class:"col-md-9 m-0 p-0 bg-blue rounded shadow card"},M={class:"row"},R={class:"col-md-4 mb-0"},G=["src"],H={class:"col-md-8 mb-0"},q={class:"row justify-content-end"},z={key:0,class:"col-md-1 col-2 p-2",title:"edit event"},J=h(()=>e("i",{"data-bs-toggle":"modal","data-bs-target":"#edit-event",class:"selectable mdi mdi-application-edit"},null,-1)),K=[J],O={key:1,class:"col-md-1 col-2 p-2"},Q={class:"m-2 pb-2"},U={class:"pb-2"},W={class:"me-5 m-2 mt-4"},X={class:"row m-1 justify-content-between"},Y={key:0,class:"col-md-3 col-6"},Z={class:"text-bold"},$={key:1,class:"col-5 rounded shadow bg-danger"},tt=h(()=>e("h5",null,"There are no spots left",-1)),et=[tt],ct={key:2,class:"bg-warning col-5 rounded shadow"},ot=h(()=>e("h5",null,"This event is cancelled",-1)),st=[ot],nt={class:"col-4 me-3"},at=u(" Attend "),it=h(()=>e("i",{class:"mdi mdi-ticket"},null,-1)),dt=[at,it],lt={class:"row m-3 justify-content-center"},rt={class:"col-md-9 justify-content-center bg-blue rounded shadow"},_t={class:"row p-2"},vt={class:"row m-3 justify-content-center"},mt={class:"col-md-9 justify-content-center bg-blue rounded shadow"},ht={key:0,class:"row"},ut={class:"col-md-10 col-12"},Et={key:1,class:"row m-2"},pt=u(" Edit Event ");function wt(s,r,n,t,yt,kt){const b=_("Tickets"),g=_("CommentForm"),T=_("Comment"),C=_("EditTower"),x=_("Modal");return c(),o(E,null,[e("div",P,[e("div",V,[e("div",L,[e("div",M,[e("div",R,[e("img",{class:"img-fluid rounded shadow crop",src:t.activeEvent.coverImg,alt:""},null,8,G)]),e("div",H,[e("div",q,[t.account.id==t.activeEvent.creatorId&&!t.activeEvent.isCanceled?(c(),o("div",z,K)):d("",!0),t.account.id==t.activeEvent.creatorId&&!t.activeEvent.isCanceled?(c(),o("div",O,[e("button",{onClick:r[0]||(r[0]=(...i)=>t.cancelEvent&&t.cancelEvent(...i)),title:"Cancel Event",type:"button",class:"btn-close btn-close-white","aria-label":"Close"})])):d("",!0)]),e("h2",Q,[e("div",U,v(t.activeEvent.name),1),u(" "+v(new Date(t.activeEvent.startDate||t.activeEvent.startDate).toLocaleDateString())+" "+v(t.activeEvent.location),1)]),e("h6",W,v(t.activeEvent.description),1),e("div",X,[t.activeEvent.capacity>0&&t.activeEvent.isCanceled==!1?(c(),o("div",Y,[e("p",Z,v(t.activeEvent.capacity)+" spots left",1)])):d("",!0),t.activeEvent.capacity<=0?(c(),o("div",$,et)):d("",!0),t.activeEvent.isCanceled?(c(),o("div",ct,st)):d("",!0),e("div",nt,[t.activeEvent.capacity>0&&!t.activeEvent.isCanceled&&!t.hasTicket&&t.account.id?(c(),o("button",{key:0,onClick:r[1]||(r[1]=(...i)=>t.addTicket&&t.addTicket(...i)),title:"Attend",class:"btn yellow shadow m-2 px-2 py-1"},dt)):d("",!0)])])])])])]),e("div",lt,[e("div",rt,[e("div",_t,[(c(!0),o(E,null,y(t.people,i=>(c(),o("div",{class:"col-3",key:i.id},[m(b,{ticket:i},null,8,["ticket"])]))),128))])])]),e("div",vt,[e("div",mt,[t.account.id?(c(),o("div",ht,[e("div",ut,[m(g)])])):d("",!0),t.comments.length>0?(c(),o("div",Et,[(c(!0),o(E,null,y(t.comments,i=>(c(),o("div",{class:"col-md-12",key:i.id},[m(T,{comment:i},null,8,["comment"])]))),128))])):d("",!0)])])]),m(x,{id:"edit-event"},{title:k(()=>[pt]),body:k(()=>[m(C)]),_:1})],64)}var Tt=B(N,[["render",wt],["__scopeId","data-v-4985f30c"]]);export{Tt as default};
